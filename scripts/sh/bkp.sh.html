<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>bkp.sh | Cordeiro's DEV</title>
<meta name='viewport' content='width=device-width, initial-scale=1'>	
<link rel='apple-touch-icon' sizes='57x57' href='https://rodcordeiro.github.io/shares/favicons/game/apple-icon-57x57.png'>
<link rel='apple-touch-icon' sizes='60x60' href='https://rodcordeiro.github.io/shares/favicons/game/apple-icon-60x60.png'>
<link rel='apple-touch-icon' sizes='72x72' href='https://rodcordeiro.github.io/shares/favicons/game/apple-icon-72x72.png'>
<link rel='apple-touch-icon' sizes='76x76' href='https://rodcordeiro.github.io/shares/favicons/game/apple-icon-76x76.png'>
<link rel='apple-touch-icon' sizes='114x114' href='https://rodcordeiro.github.io/shares/favicons/game/apple-icon-114x114.png'>
<link rel='apple-touch-icon' sizes='120x120' href='https://rodcordeiro.github.io/shares/favicons/game/apple-icon-120x120.png'>
<link rel='apple-touch-icon' sizes='144x144' href='https://rodcordeiro.github.io/shares/favicons/game/apple-icon-144x144.png'>
<link rel='apple-touch-icon' sizes='152x152' href='https://rodcordeiro.github.io/shares/favicons/game/apple-icon-152x152.png'>
<link rel='apple-touch-icon' sizes='180x180' href='https://rodcordeiro.github.io/shares/favicons/game/apple-icon-180x180.png'>
<link rel='icon' type='image/png' sizes='192x192'  href='https://rodcordeiro.github.io/shares/favicons/game/android-icon-192x192.png'>
<link rel='icon' type='image/png' sizes='32x32' href='https://rodcordeiro.github.io/shares/favicons/game/favicon-32x32.png'>
<link rel='icon' type='image/png' sizes='96x96' href='https://rodcordeiro.github.io/shares/favicons/game/favicon-96x96.png'>
<link rel='icon' type='image/png' sizes='16x16' href='https://rodcordeiro.github.io/shares/favicons/game/favicon-16x16.png'>
<link rel='manifest' href='https://rodcordeiro.github.io/shares/favicons/game/manifest.json'>
<meta name='msapplication-TileImage' content='https://rodcordeiro.github.io/shares/favicons/game/ms-icon-144x144.png'>
<!-- Informações da página -->
	<!-- Informações sobre o Site quando o link é compartilhado-->
	<meta property='og:type' content='website'>
	<meta property='og:locale' content='pt_BR' />
	<meta property='og:image' content='https://rodcordeiro.github.io/shares/favicons/game/android-icon-192x192.png'>
	<meta property='og:site_name' content='Rodrigo Cordeiro | Cordeiro's DEV'>
	<meta property='og:title' content='Rodrigo Cordeiro | Cordeiro's DEV'>
	<meta property='og:determiner' content='the'>
	<meta property='og:url' content='https://rodcordeiro.github.io/shares/'>
	<meta property='og:description' content='Compartilhamento de livros, imagens, audios e scripts utilizados em meus projetos.'>
	<meta property='og:image:secure_url' content='https://rodcordeiro.github.io/shares/favicons/game/android-icon-192x192.png' />

	<meta name='twitter:card' content='summary' />
	<meta name='twitter:description' content='Compartilhamento de livros, imagens, audios e scripts utilizados em meus projetos.'/>
	<meta name='twitter:title' content='Rodrigo Cordeiro | Cordeiro's DEV' />
	<meta name='twitter:site' content='@drigocordeiro13' />
	<meta name='twitter:image' content='https://rodcordeiro.github.io/shares/favicons/game/android-icon-192x192.png' />
	<meta name='twitter:creator' content='@drigocordeiro13' />

	<link rel='prefetch' href='https://rodcordeiro.github.io/shares/'>
	<link rel='prerender' href='https://rodcordeiro.github.io/shares/'>
	<meta itemprop='name' content=' | Cordeiro's DEV' />
	<meta itemprop='url' content='https://rodcordeiro.github.io/shares/' />
	<meta property='description' content='Compartilhamento de livros, imagens, audios e scripts utilizados em meus projetos.'>

	<!-- Outros dados como o site, como permissão para indexação do site, faixa etária, idioma, etc. -->
	<link rel='home' href='https://rodcordeiro.github.io/shares/'>
	<meta name='keywords' content='html, css, js, javascript, código, programação, web, development, webdesign, devops,front-end,aprender, educação, aprendizado'>
	<meta name='robots' content='index, follow'>
	<meta name='revisit-after' content='1 day'>
	<meta name='rating' content='general'>
	<meta name='language' content='pt-br'>

	<!-- Informações sobre o Autor -->
	<meta property='author' content='Rodrigo Cordeiro'>
	<meta name='dc.creator.address' content='rodrigomendoncca@gmail.com'>

<!-- LINKS -->
<link rel='stylesheet' href='https://rodcordeiro.github.io/shares/scripts/css/highlight.css'>
<script src='https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.16.2/build/highlight.min.js'></script>
<script>hljs.initHighlightingOnLoad();</script>

</head>
<body>
<h3><a href='bkp.sh' download='bkp.sh'>Download item</a>  |  <a href='./'>Voltar<a/></h3>
<div>
<pre><code class='bash'>
#!/bin/sh
#
# SCRIPT DE BKP
# Created by Rodrigo Cordeiro
# August 2019
Principal(){
clear
echo
echo "-------------------------------------"
echo "OPÇÕES:"
echo
echo " 1. Efetuar BKP;"
echo " 2. Restaurar BKP;"
echo
echo "Insira a opção:"
read OPCAO
echo
echo "-------------------------------------"
case $OPCAO in
  1) echo "Opção selecionada: 1. Efetuar BKP;";BKP;;
  2) echo "Opção selecionada: 2. Restaurar. BKP;";RET_BKP;;
  *) echo "Você tem de entrar com um parâmetro válido";Principal ;;
esac
}

BKP (){
	clear
	echo "Criando a pasta de BKP"
mkdir BKP
echo "-------------------------------------"
 #Salva os arquivos na pasta BKP
echo "Salvando os arquivos na pasta de BKP"
cp -r Documentos BKP
cp -r 'Área de Trabalho' BKP
cp -r Imagens BKP
cp -r Projetos BKP
cp *.sh MEGA/Cordeiro/DRIGO/Scripts/
mysqldump -ucordeiro -p @C0rdeiro --all-databases > ./bkp.databases.db 
cp bkp.databases.db MEGA/Cordeiro/DRIGO/SQL
mv bkp.databases.db BKP
ORIGEM="/home/cordeiro/BKP"
LOCALHOST="/var/www/"

#Conexão FTP
FTP_HOST="files.000webhost.com"
FTP_USER="rodconceptive"
FTP_PWD="@Drigo13"

#Bkp name
DIA=`date +%d.%m.%Y-%H.%M`
EXT=".tgz"
BKP_NAME="BKP_"${DIA}${EXT}
LOCALHOST_BKP="LOCALHOST_"${DIA}${EXT}
#**************************
echo "-------------------------------------"
echo "Compactando o backup"
#Criar o bkp
echo""
tar -czpf ./${BKP_NAME} ${ORIGEM}
tar -czpf ./${LOCALHOST_BKP} ${LOCALHOST}

#**** Enviar para o FTP
echo "-------------------------------------"
echo "Conectando ao FTP e enviando os arquivos"
ftp -in <<EOF
open $FTP_HOST
user $FTP_USER $FTP_PWD
bin
hash
prompt
mkdir BKP_${DIA}
cd BKP_${DIA}
put $BKP_NAME
put $LOCALHOST_BKP
bye
EOF

	#END MSG
		echo "-------------------------------------"
		echo "Backup ${BKP_NAME} e ${LOCALHOST_BKP} realizados com sucesso!"
		echo ""
		echo "Diretório de destino: ${FTP_HOST}/BKP"
		echo ""
		echo "-------------------------------------"
		echo ""
		rm -r BKP
rm $BKP_NAME
rm $LOCALHOST_BKP
}
RET_BKP (){
#Conexão FTP
FTP_HOST="files.000webhost.com"
FTP_USER="rodconceptive"
FTP_PWD="@Drigo13"
echo "Conectando ao FTP e enviando os arquivos"
ftp -in <<EOF
open $FTP_HOST
user $FTP_USER $FTP_PWD
bin
hash
prompt
mget *
bye
EOF
}

Principal
</code></pre>
</div>
</body>
</html>
